<div class="profile-container">
  <div class="profile-form-container">

    <form #form="ngForm" (ngSubmit)="onSubmit()">

      <div class="profile-input-container">
        <label>{{'user.profile.form.native.language.label' | translate}} *:</label>
        <autocomplete-dropdown #nativeLanguageDropdown (dropdownListItemSelect)="onNativeLanguageSelect($event)" [placeholder]="'user.profile.form.native.language.placeholder' | translate" [autocompleteResultLabelFunction]="namePropertyLabel" [selectedItemLabelFunction]="namePropertyLabel"
            [getData]="getLanguages()">
        </autocomplete-dropdown>
        <div *ngIf="!user.getNativeLanguage()" class="alert alert-danger">{{'user.profile.form.permit.type.validation' | translate}}.</div>
      </div>

      <div class="profile-input-container">
        <label>{{'user.profile.form.country.label' | translate}} *:</label>
        <autocomplete-dropdown #countryDropdown (dropdownListItemSelect)="onNCountryOfOriginSelect($event)" [placeholder]="'user.profile.form.country.placeholder' | translate" [autocompleteResultLabelFunction]="namePropertyLabel" [selectedItemLabelFunction]="namePropertyLabel"
            [getData]="getCountries()">
        </autocomplete-dropdown>
        <div *ngIf="!user.countryOfOriginCode" class="alert alert-danger">{{'user.profile.form.permit.type.validation' | translate}}.</div>
      </div>

      <div class="profile-input-container">
        <label>{{'user.profile.form.permit.label' | translate}} *:</label>
        <div class="profile-input-permit-radio-container">
          <div>
            <label for="permit-yes">
            <input class="radioButton" type="radio" name="permit" id="permit-yes" [(ngModel)]="gotPermit" value="true" />
            <span></span>
            {{'common.yes' | translate}}</label>
          </div>
          <div>
            <label for="permit-no">
            <input class="radioButton" type="radio" name="permit" id="permit-no" [(ngModel)]="gotPermit" value="false" />
            <span></span>
            {{'common.no' | translate}}</label>
          </div>
        </div>
      </div>

      <div *ngIf="gotPermit === 'true'" class="profile-input-container">
        <label>{{'user.profile.form.permit.type.label' | translate}} *:</label>
        <div class="profile-input-permit-radio-container">
          <div>
            <label for="permit-type-asylum">
            <input class="radioButton" type="radio" name="permit-type" id="permit-type-asylum" [(ngModel)]="user.currentStatus" value="asylum_seeker" />
            <span></span>
            {{'user.profile.form.permit.type.asylum' | translate}}</label>
          </div>
          <div>
            <label for="permit-type-permanent">
            <input class="radioButton" type="radio" name="permit-type" id="permit-type-permanent" [(ngModel)]="user.currentStatus" value="permanent_residence" />
            <span></span>
            {{'user.profile.form.permit.type.permanent' | translate}}</label>
          </div>
          <div>
            <label for="permit-type-temporary">
            <input class="radioButton" type="radio" name="permit-type" id="permit-type-temporary" [(ngModel)]="user.currentStatus" value="temporary_residence_work" />
            <span></span>
            {{'user.profile.form.permit.type.temporary' | translate}}</label>
          </div>
        </div>
      </div>

      <div *ngIf="gotPermit === 'true'" class="profile-upload-button-container">
        <input type="file" id="permit-image-filename" name="permit-image-filename" class="input-image-upload" (change)="onPermitImageFilenameChange($event)" accept="image/*">
        <label for="permit-image-filename" class="btn-secondary btn-small btn btn-image-upload" >{{'user.profile.form.permit.upload.button' | translate}}</label>
        <p>{{'user.profile.form.permit.upload.description' | translate}}</p>
      </div>

      <hr>

      <div class="profile-input-container">
        <label>{{'user.profile.form.languages.label' | translate}}:</label>
        <autocomplete-dropdown (dropdownListItemSelect)="onLanguageSelect($event)" [clearDestinationAfterSelection]="true" [placeholder]="'user.profile.form.languages.placeholder' | translate" [autocompleteResultLabelFunction]="namePropertyLabel" [selectedItemLabelFunction]="namePropertyLabel"
           [getData]="getLanguages()">
        </autocomplete-dropdown>

        <div class="profile-input-languages-table-container">
          <div class="profile-input-languages-table-row-container" *ngFor="let userLanguage of user.userLanguages">
            <div class="profile-input-languages-table-row-inner-container" *ngIf="userLanguage.proficiency.proficiency !== 5">
              <div class="profile-input-languages-table-row-inner-language-container"><p>{{userLanguage.language.name}}</p></div>
              <div class="profile-input-languages-table-row-inner-icon-container" (click)="onRemoveUserLanguage(userLanguage)">
                <i class="fa fa-times" aria-hidden="true"></i>
              </div>
              <div class="profile-input-languages-table-row-inner-dropdown-container">
                <autocomplete-dropdown [lookupType]="'list'" [enumList]="languageProficiencyLevelsAvailable" [(destination)]="userLanguage.proficiency" [placeholder]="'language.proficiency.placeholder' | translate" [autocompleteResultLabelFunction]="namePropertyLabel"
                    [selectedItemLabelFunction]="namePropertyLabel">
                </autocomplete-dropdown>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="profile-input-container">
        <label>{{'user.profile.form.skills.label' | translate}}:</label>
        <textarea class="form-control material-input" name="skills" id="skills" class="form-control material-input" autosize type="text" placeholder="{{'user.profile.form.skills.placeholder' | translate}}" [(ngModel)]="user.skills"></textarea>
      </div>

      <div class="profile-input-container">
        <label>{{'user.profile.form.work.experience.label' | translate}}:</label>
        <textarea class="form-control material-input" name="workExperience" id="work-experience" class="form-control material-input" autosize type="text" placeholder="{{'user.profile.form.work.experience.placeholder' | translate}}" [(ngModel)]="user.workExperience"></textarea>
      </div>
<!--
Documents not supported yet. TODO implement when documents supported in backend.
      <div class="profile-upload-button-container">
        <button class="btn-secondary btn-small btn">{{'user.profile.form.resume.upload.button' | translate}}</button>
        <p>{{'user.profile.form.resume.upload.description' | translate}}</p>
      </div>
-->

      <div class="profile-button-container">
        <div *ngIf="errorMessage" class="error-message">{{errorMessage | translate}}</div>
        <div *ngIf="errorCause" class="error-message">{{errorCause}}</div>
        <div *ngIf="saveSuccess" class="save-message">{{'user.profile.form.submit.success' | translate}}</div>
        <button type="submit" class="btn-primary btn-small btn">{{'user.profile.form.submit.button' | translate}}</button>
      </div>
    </form>

  </div>
</div>
